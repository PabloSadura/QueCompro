@if(loading){
  <div class="alert alert-info text-center"> {{ status }} </div>
}

@if (results.length > 0) {
  <div class="row g-4">
    <h3 class="h5 mb-3 text-center">Mejores opciones</h3>
    @for (r of results; track $index) {
      <div class="col-12 col-md-6 col-lg-4">
        <div class="card h-100 shadow-sm hover-elevate rounded-4">
          @if (r.imagen) {
            <img  [src]="r.imagen" alt="{{ r.modelo || r.marca }}" class="card-img-top">
          }
          <div class="card-body">
            <h5 class="card-title">{{ r.modelo || r.marca }}</h5>
            <p><strong>Precio:</strong> {{ r.precio }}</p>
            <p><strong>Recomendación:</strong> {{ r.recomendacion }}</p>
            <div class="accordion" id="accordion{{ $index }}">
              <!-- Características -->
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingCar{{ $index }}">
                  <button class="accordion-button collapsed" type="button"
                  data-bs-toggle="collapse"
                  [attr.data-bs-target]="'#collapseCar'+ $index "
                  aria-expanded="false" [attr.aria-controls]="'collapseCar'+ $index ">
                  Características
                </button>
              </h2>
              <div id="collapseCar{{ $index }}" class="accordion-collapse collapse"
              [attr.aria-labelledby]="'headingCar'+ $index" [attr.data-bs-parent]="'#accordion' + $index">
              <div class="accordion-body">
                <ul>
                  @for (c of r.caracteristicas; track $index) {
                        <li>{{ c }}</li>
                      }
                    </ul>
                  </div>
                </div>
              </div>
              
              <!-- Pros -->
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingPros{{ $index }}">
                  <button class="accordion-button collapsed" type="button"
                  data-bs-toggle="collapse"
                  [attr.data-bs-target]="'#collapsePros'+ $index "
                  aria-expanded="false" [attr.aria-controls]="'collapsePros'+$index">
                    PROS
                  </button>
                </h2>
                <div id="collapsePros{{ $index }}" class="accordion-collapse collapse"
                [attr.aria-labelledby]="'headingPros'+ $index " [attr.data-bs-parent]="'#accordion' + $index ">
                <div class="accordion-body">
                  <ul>
                    @for (p of r.pros; track $index) {
                      <li >{{ p }}</li>
                    }
                  </ul>
                </div>
              </div>
            </div>
            
            <!-- Contras -->
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingCon{{ $index }}">
                <button class="accordion-button collapsed" type="button"
                data-bs-toggle="collapse"
                [attr.data-bs-target]="'#collapseCon' + $index "
                aria-expanded="false" [attr.aria-controls]="'collapseCon'+ $index ">
                CONTRAS
              </button>
            </h2>
            <div id="collapseCon{{ $index }}" class="accordion-collapse collapse"
            [attr.aria-labelledby]="'headingCon'+ $index " [attr.data-bs-parent]="'accordion'+ $index">
            <div class="accordion-body">
              <ul>
                @for (c of r.contras; track $index) {
                  <li>{{ c }}</li>
                    }
                  </ul>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer text-center">
            <a [href]="r.link" target="_blank" class="btn btn-outline-primary w-100">Ver más</a>
          </div>    
        </div>
      </div>
    </div>
  }
</div>

}




